# Telegram-бот "Суетолог"

Этот проект представляет собой многофункционального Telegram-бота, написанного на Python с использованием библиотеки `aiogram`. Бот предназначен для развлекательных и утилитарных целей в рамках закрытой группы пользователей.

## Основные возможности

### 1. Ежедневная игра "Пидор Дня"
- **Механика**: Каждый день в 11:00 (МСК) бот случайным образом выбирает одного из участников чата "пидором дня".
- **Оповещение**: В общий чат отправляется фотография "победителя" и соответствующее сообщение.
- **Статистика**: Бот ведет учет "побед" каждого участника. Статистику можно посмотреть с помощью команды `/pidorstat`, которая отображает рейтинг за день, месяц и год. Данные хранятся в Google Таблицах.

### 2. Интеграция с AI-сервисами
- **"Давинчи" (текстовая модель)**:
    - При упоминании имени "Давинчи" в сообщении, бот передает текст нейросети (предположительно, одна из моделей GPT) и возвращает сгенерированный ответ.
    - **Распознавание речи**: Бот может транскрибировать голосовые сообщения. Для этого нужно ответить на "войс" словом "давинчи" или переслать его боту в личные сообщения.
- **"Артур" (синтез речи)**:
    - При упоминании имени "Артур", бот использует технологию `SaluteSpeech` (Sber) для синтеза речи и отвечает голосовым сообщением.

### 3. Утилиты и развлечения
- **Поздравления с Днем Рождения**: Бот автоматически проверяет текущую дату и, если она совпадает с чьим-то днем рождения из списка, отправляет в чат персонализированное поздравление, сгенерированное голосом "Артура".
- **Общий Яндекс.Диск**: Файлы (фото, видео, документы), отправленные боту в личные сообщения, автоматически загружаются в общую папку на Яндекс.Диске.
- **"Шар Судьбы"**: Забавная мини-игра, которая в ответ на "поглаживание" выдает случайное предсказание в виде картинки.
- **Команды для администратора**: У бота есть ряд скрытых команд, доступных только администратору (например, отправка сообщений в чат от имени бота).

## Технический стек
- **Язык**: Python 3
- **Основная библиотека**: `aiogram` (асинхронный фреймворк для ботов Telegram)
- **Планировщик задач**: `APScheduler` (для ежедневного запуска игры)
- **База данных/Статистика**: Google Sheets (через `gspread`)
- **Работа с файлами**: `yadisk` (для интеграции с Яндекс.Диском)
- **AI-сервисы**:
    - `yandex-cloud-ai` (предположительно для функции "Давинчи")
    - `SaluteSpeech` (для синтеза речи "Артура")
- **Логирование**: `loguru`

## Установка и запуск

1.  **Клонировать репозиторий**:
    ```bash
    git clone <URL репозитория>
    cd suetolog_bot
    ```

2.  **Создать виртуальное окружение и установить зависимости**:
    - Убедитесь, что у вас установлен `uv`.
    - Выполните в корне проекта:
    ```bash
    # Создаст .venv и установит в него зависимости из pyproject.toml
    uv sync
    ```

3.  **Активировать виртуальное окружение**:
    ```bash
    # Для Linux/macOS
    source .venv/bin/activate
    # Для Windows
    .venv\Scripts\activate
    ```

4.  **Настроить конфигурацию**:
    - Создайте файл `paswords.py` в корне проекта.
    - Пропишите в нем следующие переменные с вашими данными:

    ```python
    # --- Основные настройки Telegram ---
    major_suetolog = "ТОКЕН_ВАШЕГО_ТЕЛЕГРАМ-БОТА"
    admin_id = ВАШ_TELEGRAM_ID_АДМИНИСТРАТОРА  # Замените на числовой ID
    group_id = ID_ВАШЕЙ_ГРУППЫ              # Замените на числовой ID (например: -100123456789)
    loggs_acc = ID_ДЛЯ_ОТПРАВКИ_ЛОГОВ          # Замените на числовой ID

    # --- Настройки API Яндекса ---
    yadisk_token = "ТОКЕН_ЯНДЕКС.ДИСКА"
    yandex_gpt_catalog_id = "ID_КАТАЛОГА_YANDEX_CLOUD"
    yandex_gpt_api_key = "API_КЛЮЧ_ДЛЯ_YANDEX_GPT"

    # --- Настройки API Сбера (SaluteSpeech / GigaChat) ---
    autoriz_data_salute = "ДАННЫЕ_АВТОРИЗАЦИИ_SALUTESPEECH" # В формате Basic <ключ>
    scope_salute = "SALUTE_SPEECH_PERS"

    autoriz_data_giga = "ДАННЫЕ_АВТОРИЗАЦИИ_GIGACHAT" # В формате Basic <ключ>
    scope_giga = "GIGACHAT_API_PERS"
    ```
    *Примечание: также убедитесь, что у вас есть файл `dr.json` для функции поздравлений и `service_account.json` для работы с Google Sheets, если эти функции используются.*

5.  **Запустить бота**:
    ```bash
    uv run
    ```
    *Эта команда выполнит `python main.py` внутри активированного `uv` окружения.*